# ============================================================
# Orris Application Configuration Example
# ============================================================
#
# SETUP INSTRUCTIONS:
#   1. Copy this file: cp config.example.yaml config.yaml
#   2. Edit config.yaml with your settings
#   3. For production, use environment variables instead
#
# Configuration Priority (highest to lowest):
#   1. Environment variables (ORRIS_<SECTION>_<KEY>)
#   2. config.yaml file (this file after copying)
#   3. Default values in code
#
# Environment Variable Format:
#   ORRIS_<SECTION>_<KEY>
#   Example: ORRIS_SERVER_PORT=8080
#            ORRIS_DATABASE_PASSWORD=secret
#
# SECURITY WARNING:
#   - NEVER commit config.yaml with real passwords to git!
#   - config.yaml is in .gitignore for safety
#   - Always use environment variables for production secrets
# ============================================================

# ------------------------------------------------------------
# Server Configuration
# ------------------------------------------------------------
server:
  host: "0.0.0.0"  # Bind address (0.0.0.0 = all interfaces)
  port: 8081       # HTTP server port
  mode: "debug"    # Options: debug, release, test
                   # Env override: ORRIS_SERVER_MODE=release
  base_url: "http://localhost:8081"  # Base URL for API
  allowed_origins:  # CORS allowed origins
    - "http://localhost:3000"
    - "http://localhost:8080"
    # Production environment: replace with your actual domain
    # - "https://yourdomain.com"
    # - "https://app.yourdomain.com"
  frontend_callback_url: "http://localhost:3000/oauth/callback"  # Frontend OAuth callback URL
    # Env override: ORRIS_SERVER_FRONTEND_CALLBACK_URL=https://yourdomain.com/oauth/callback
    # Production example:
    # frontend_callback_url: "https://yourdomain.com/oauth/callback"

# ------------------------------------------------------------
# Database Configuration
# ------------------------------------------------------------
database:
  host: "localhost"      # Database host
                         # Env override: ORRIS_DATABASE_HOST=your-db-host
  port: 3306             # MySQL port
  username: "orris"      # Database username
                         # Env override: ORRIS_DATABASE_USERNAME=your-user
  password: ""           # ⚠️ LEAVE EMPTY - Use environment variable!
                         # REQUIRED: ORRIS_DATABASE_PASSWORD=your_password
  database: "orris_dev"  # Database name
                         # Env override: ORRIS_DATABASE_DATABASE=orris_prod

  # Connection pool settings
  max_idle_conns: 10     # Maximum idle connections in pool
  max_open_conns: 100    # Maximum open connections
  conn_max_lifetime: 60  # Connection max lifetime (minutes)

# ------------------------------------------------------------
# Logger Configuration
# ------------------------------------------------------------
logger:
  level: "info"          # Log level: debug, info, warn, error
                         # Env override: ORRIS_LOGGER_LEVEL=debug
  format: "console"      # Output format: json (prod), console (dev)
                         # Env override: ORRIS_LOGGER_FORMAT=json
  output_path: "stdout"  # Output: stdout, stderr, or file path
                         # Env override: ORRIS_LOGGER_OUTPUT_PATH=/var/log/orris.log

# ------------------------------------------------------------
# Redis Configuration
# ------------------------------------------------------------
redis:
  host: "localhost"      # Redis server host
                         # Env override: ORRIS_REDIS_HOST=redis-server
  port: 6379             # Redis server port
  password: ""           # ⚠️ LEAVE EMPTY - Use environment variable!
                         # OPTIONAL: ORRIS_REDIS_PASSWORD=your_redis_password
  db: 0                  # Redis database number (0-15)
                         # Env override: ORRIS_REDIS_DB=1

# ------------------------------------------------------------
# OAuth2 Configuration
# ------------------------------------------------------------
# Setup instructions:
#   1. Google OAuth:
#      - Visit https://console.cloud.google.com/apis/credentials
#      - Create OAuth 2.0 Client ID
#      - Set authorized redirect URI: http://localhost:8081/auth/oauth/google/callback
#   2. GitHub OAuth:
#      - Visit https://github.com/settings/developers
#      - Create new OAuth App
#      - Set callback URL: http://localhost:8081/auth/oauth/github/callback

oauth:
  google:
    client_id: ""        # ⚠️ REQUIRED for Google OAuth
                         # Get from: https://console.cloud.google.com/apis/credentials
                         # Env override: ORRIS_OAUTH_GOOGLE_CLIENT_ID=your-client-id
    client_secret: ""    # ⚠️ LEAVE EMPTY - Use environment variable!
                         # REQUIRED: ORRIS_OAUTH_GOOGLE_CLIENT_SECRET=your-secret
    redirect_url: "http://localhost:8081/auth/oauth/google/callback"
                         # Development: http://localhost:8081/auth/oauth/google/callback
                         # Production: https://api.yourdomain.com/auth/oauth/google/callback
                         # Env override: ORRIS_OAUTH_GOOGLE_REDIRECT_URL=...

  github:
    client_id: ""        # ⚠️ REQUIRED for GitHub OAuth
                         # Get from: https://github.com/settings/developers
                         # Env override: ORRIS_OAUTH_GITHUB_CLIENT_ID=your-client-id
    client_secret: ""    # ⚠️ LEAVE EMPTY - Use environment variable!
                         # REQUIRED: ORRIS_OAUTH_GITHUB_CLIENT_SECRET=your-secret
    redirect_url: "http://localhost:8081/auth/oauth/github/callback"
                         # Development: http://localhost:8081/auth/oauth/github/callback
                         # Production: https://api.yourdomain.com/auth/oauth/github/callback
                         # Env override: ORRIS_OAUTH_GITHUB_REDIRECT_URL=...

# ============================================================
# Usage Examples
# ============================================================
#
# Development (local with config.yaml):
#   1. cp config.example.yaml config.yaml
#   2. Edit config.yaml with your local DB settings
#   3. Set sensitive values as environment variables:
#      export ORRIS_DATABASE_PASSWORD=local_password
#      export ORRIS_OAUTH_GOOGLE_CLIENT_SECRET=your-google-secret
#      export ORRIS_OAUTH_GITHUB_CLIENT_SECRET=your-github-secret
#   4. Run: ./bin/orris server
#
# Production (environment variables only):
#   export ORRIS_SERVER_MODE=release
#   export ORRIS_SERVER_PORT=8080
#   export ORRIS_SERVER_FRONTEND_CALLBACK_URL=https://yourdomain.com/oauth/callback
#   export ORRIS_DATABASE_HOST=prod-db.example.com
#   export ORRIS_DATABASE_USERNAME=prod_user
#   export ORRIS_DATABASE_PASSWORD=secure_prod_password
#   export ORRIS_DATABASE_DATABASE=orris_production
#   export ORRIS_REDIS_HOST=redis-server
#   export ORRIS_REDIS_PASSWORD=redis_password
#   export ORRIS_OAUTH_GOOGLE_CLIENT_ID=your-google-client-id
#   export ORRIS_OAUTH_GOOGLE_CLIENT_SECRET=your-google-secret
#   export ORRIS_OAUTH_GOOGLE_REDIRECT_URL=https://api.yourdomain.com/auth/oauth/google/callback
#   export ORRIS_OAUTH_GITHUB_CLIENT_ID=your-github-client-id
#   export ORRIS_OAUTH_GITHUB_CLIENT_SECRET=your-github-secret
#   export ORRIS_OAUTH_GITHUB_REDIRECT_URL=https://api.yourdomain.com/auth/oauth/github/callback
#   export ORRIS_LOGGER_LEVEL=warn
#   export ORRIS_LOGGER_FORMAT=json
#   ./bin/orris server
#
# Docker Compose (docker-compose.yml):
#   environment:
#     - ORRIS_DATABASE_HOST=mysql
#     - ORRIS_DATABASE_PASSWORD=${DB_PASSWORD}
#     - ORRIS_REDIS_HOST=redis
#     - ORRIS_OAUTH_GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
#     - ORRIS_OAUTH_GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
#     - ORRIS_OAUTH_GITHUB_CLIENT_ID=${GITHUB_CLIENT_ID}
#     - ORRIS_OAUTH_GITHUB_CLIENT_SECRET=${GITHUB_CLIENT_SECRET}
#     - ORRIS_SERVER_MODE=release
#
# Kubernetes (using ConfigMap + Secret):
#   # ConfigMap for non-sensitive configs
#   # Secret for passwords and OAuth secrets:
#   #   - ORRIS_DATABASE_PASSWORD
#   #   - ORRIS_REDIS_PASSWORD
#   #   - ORRIS_OAUTH_GOOGLE_CLIENT_SECRET
#   #   - ORRIS_OAUTH_GITHUB_CLIENT_SECRET
#   # See deployment examples in docs/
# ============================================================